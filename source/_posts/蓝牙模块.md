---
title: 蓝牙模块
date: 2017-03-02 10:30:07
tags: [蓝牙, PixHawk]
categories: UAV
---

UAV上使用的蓝牙模块以及与Pixhawk的连接
<!--more-->

# 针脚定义
蓝牙模块为HC-05主从机一体蓝牙模块

![蓝牙模块](http://i3.buimg.com/fa034c4a61759be9.png)

6个针脚定义如下：

1. VCC：3.3V
2. GND：地线
3. RX：接收
4. TX：发送
5. STATE：输出针脚，若蓝牙模块处于连接状态则为高电平，否则为低电平
6. EN：用来控制AT指令模式与正常工作模式的切换，我们所使用的模块包含一个按键，这个按键可以使EN置高或置低，因此可以忽略EN针脚

# 模式切换
有两种进入AT指令模式的方法：

1. 在模块上电前，按住按键使EN置高，然后上电，此时LED灯慢闪（2秒一次），此种方式波特率为38400
2. 正常上电，此时LED灯快闪（1秒两次），之后按一次按键，LED灯不会发生变化，但是此时已进入AT模式，此种方式波特率为9600

# 常用AT指令
* 测试指令：**AT**，返回**OK**
* 查询版本号：**AT+VERSION?**，返回软件版本号
* 查询模块地址：**AT+ADDR?**，返回模块地址
* 查询模块名称：**AT+NAME?**，返回模块名称，**但是这条命令在我使用的模块下无法返回名称**
* 设置模块名称：**AT+NAME=<Param>**，返回**OK**则设置成功
* 查询模块配对码：**AT+PSWD?**，返回模块配对码
* 设置模块配对码：**AT+PSWD=<Param>**，返回**OK**则设置成功 
* 查询模块串口参数：**AT+UART?**，返回模块串口参数（波特率，停止位，校验位）
* 设置模块串口参数：**AT+UART=<Param>,<Param2>,<Param3>**，返回**OK**则设置成功 

# 与飞控连接
设置好蓝牙模块后，将其与飞控板连接，这里我所使用的是Pixhawk，它的TELEM1端口从左至右排序依次为：VCC，RX，TX，空，空，GND

依照上述方式将蓝牙模块与飞控板连接，简单测试Tower可以与Pixhawk正常连接，在此基础上可以开发基于蓝牙的地面站

